Marvic API Documentation
========================

Marvic Global Class
-------------------

The `Marvic` is a top-level global class used to instance main objects for your web application lifecycle. This class is composed by static methods to create applications, routers, settings, custom middleware functions, and so on.

### Static Methods

#### Marvic::application()

```php
public static function application(array $settings = []): Marvic\Application
```

Create a new Marvic Application object.

**Parameters:**

* **$settings**: The data of application configurations.

#### Marvic::httpclient()

```php
public static function httpclient(): Marvic\HTTP\Client
```

Create a new Marvic HTTP Client object.

#### Marvic::router()

```php
public static function router(array $options = []): Marvic\Routing\Router
```

Create a new Marvic Router object.

#### Marvic::static()

```php
public static function static(array $data = []): Callable
```

Create a custom middleware function to serve static files.

#### Marvic::settings()

```php
public static function settings(array $data = []): Marvic\Settings
```

Create a new Marvic Settings object.

Marvic Application
------------------

A conventional `Marvic\Application` instance represents a Marvic Web Application, created by calling the top-level global class `Marvic`. An application is responsable to process the given HTTP requests from a web server.

```php
$app = Marvic::application();

$app->get('/', function($request, $response) {
	$response->send('A simple Marvic Application');
});

$app->run();
```

A Marvic Application contains properties, methods and alias methods to register and map routes, configure middlewares, register events, install engines (including template engines), render views and test request processing. It also has properties that they add some informations about app or affect how an application must behaves. For more informations, see [Application Settings](#application_settings).

Applications can be structured as a tree using the application method `use` (see [Application::use](#application_method_use)). When a cild app is mount by parent app, some properties of parent app will be inherited by your child apps.

<a name="application_settings"></a>
### Application Settings

**Application Settings for Application Properties**

| Property             | Type    | Description                             | Default     |
| -------------------- | ------- | --------------------------------------- | ----------- |
| app.baseurl          | string  | The application base URL                | `''`        |
| app.env              | string  | The application environment             | development |
| app.debug            | boolean | Enable or disable the application debug | false       |
| app.language         | string  | The application language                | en          |
| app.name             | string  | The application name                    | `''`        |
| app.timezone         | string  | The application timezone                | UTC         |

**Application Settings for HTTP  and Routing**

| Property             | Type    | Description                                                                                                     | Default          |
| -------------------- | ------- | --------------------------------------------------------------------------------------------------------------- | ---------------- |
| http.allowedHeaders  | array   | List of allowed headers thst a client can use to access a resource on server.                                   | `[]`             |
| http.allowedOrigins  | array   | List of allowed domains that a client can use to access a resource on server.                                   | `[]`             |
| http.allowedMethods  | array   | List of allowed method that a client can use to access a resource on server.                                    | `[]`             |
| http.caseSensitive   | boolean | Enables or disables the case sensitivity routing (if router treat '/foo' and '/Foo' as the same or differents). | false            |
| http.mergeParams     | boolean | Preserves the request oarameter values from the router parent.                                                  | false            |
| http.strict          | boolean | Enables or disables the strict routing (if router treat '/foo' and '/foo/' as the same or differents).          | false            |
| http.subdomainOffset | integer | The number of dot-separated parts to remove to access subdomains.                                               | 2                |
| http.trustProxy      | string  | The request header used to determinate the IP addresses of client.                                              | 'X-Forwared-For' |
| http.xPoweredBy      | boolean | Enables or disables the `X-Powered-By: Marvic` Header.                                                          | true             |

### Application Events

| Event      | Description                                                                |
| ---------- | -------------------------------------------------------------------------- |
| error      | It's called when occours an error in a request processing.                 |
| finish     | It's called when an application finish the request processing.             |
| mount      | It's called when a sub-app (or child app) is mounted on a parent app.      |
| prehandler | It's called when a router is runnig before a route handler.                |
| request    | It's called when an application get a request before any route processing. |
| response   | It's called when a response is sent by application to client.              |
| route      | It's called when a route is resolved.                                      |
| start      | It's called when an application start the request processing.              |

### Instance Properties

#### Application::$context

```php
public array $context = []
```

#### Application::$mountpath

```php
public string $mountpath = '/'
```

#### Application::$parent

```php
public readonly string ?$parent = null
```

#### Application::$router

```php
public readonly Marvic\Routing\Router $router
```

#### Application::$settings

```php
public readonly Marvic\Settings $settings
```

### Instance Methods

#### Application::any()

```php
public function any(string $path, ...$handlers): Marvic\Routing\Router
```

#### Application::connect()

```php
public function connect(string $path, ...$handlers): Marvic\Routing\Router
```

#### Application::delete()

```php
public function delete(string $path, ...$handlers): Marvic\Routing\Router
```

#### Application::engine()

```php
public function engine(string $name, mixed $engine): void
```

#### Application::get()

```php
public function get(string $key, mixed $default): mixed
```

```php
public function get(string $path, ...$handlers): Marvic\Routing\Router
```

#### Application::head()

```php
public function head(string $path, ...$handlers): Marvic\Routing\Router
```

#### Application::on()

```php
public function on(string $event, Callable $callback): void
```

#### Application::options()

```php
public function options(string $path, ...$handlers): Marvic\Routing\Router
```

#### Application::patch()

```php
public function patch(string $path, ...$handlers): Marvic\Routing\Router
```

#### Application::post()

```php
public function post(string $path, ...$handlers): Marvic\Routing\Router
```

#### Application::put()

```php
public function put(string $path, ...$handlers): Marvic\Routing\Router
```

#### Application::render()

```php
public function render(string $view, array $data = []): string
```

#### Application::set()

```php
public function set(string $key, mixed $value): void
```

#### Application::trace()

```php
public function trace(string $path, ...$handlers): Marvic\Routing\Router
```

<a name="application_method_use"></a>
#### Application::use()

```php
public function use(...$arguments): Marvic\Routing\Router
```

Marvic Application Settings
---------------------------

### Instance methods

#### Settings::all()

```php
public function all(): array
```

#### Settings::get()

```php
public function get(string $key, mixed $default): mixed
```

#### Settings::has()

```php
public function has(string $key): bool
```

#### Settings::is()

```php
public function is(string $key, mixed $value): bool
```

#### Settings::merge()

```php
public function merge(array $data): void
```

#### Settings::remove()

```php
public function remove(string $key): void
```

#### Settings::set()

```php
public function set(string $key, mixed $value): void
```

Marvic Router
-------------

### Instance Properties

#### Router::$mountpath

```php
public string $mountpath = '/'
```

#### Router::$parent

```php
public string ?$parent = null
```

#### Router::$strict

```php
public bool $strict = false
```

#### Router::$caseSensitive

```php
public bool $caseSensitive = false
```

#### Router::$mergeParams

```php
public bool $mergeParams = false
```

### Instance methods

#### Router::any()

```php
public function any(string $path, ...$handlers): Marvic\Routing\Router
```

#### Router::connect()

```php
public function connect(string $path, ...$handlers): Marvic\Routing\Router
```

#### Router::delete()

```php
public function delete(string $path, ...$handlers): Marvic\Routing\Router
```

#### Router::get()

```php
public function get(string $path, ...$handlers): Marvic\Routing\Router
```

#### Router::group()

```php
public function group(Callable $callback): Marvic\Routing\Router
```

#### Router::match()

```php
public function match(array $methods, string $path, ...$handlers): Marvic\Routing\Router
```

#### Router::patch()

```php
public function patch(string $path, ...$handlers): Marvic\Routing\Router
```

#### Router::prefix()

```php
public function prefix(string $path, Callable $callback): Marvic\Routing\Router
```

#### Router::post()

```php
public function post(string $path, ...$handlers): Marvic\Routing\Router
```

#### Router::put()

```php
public function put(string $path, ...$handlers): Marvic\Routing\Router
```

#### Router::redirect()

```php
public function redirect(string $path, string $url, int $status = 302): Marvic\Routing\Router
```

#### Router::route()

```php
public function route(string $path): Marvic\Routing\Route
```

#### Router::trace()

```php
public function trace(string $path, ...$handlers): Marvic\Routing\Router
```

#### Router::use()

```php
public function use(...$arguments): Marvic\Routing\Router
```

#### Router::view()

```php
public function view(string $path, string $view, array $data = []): Marvic\Routing\Router
```

HTTP Client
-----------

### Instance methods

#### Client::connect()

```php
public function connect(string $path, ...$options): Marvic\HTTP\Message\Response
```

#### Client::delete()

```php
public function delete(string $path, ...$options): Marvic\HTTP\Message\Response
```

#### Client::get()

```php
public function get(string $path, ...$options): Marvic\HTTP\Message\Response
```

#### Client::head()

```php
public function head(string $path, ...$options): Marvic\HTTP\Message\Response
```

#### Client::options()

```php
public function options(string $path, ...$options): Marvic\HTTP\Message\Response
```

#### Client::patch()

```php
public function patch(string $path, ...$options): Marvic\HTTP\Message\Response
```

#### Client::post()

```php
public function post(string $path, ...$options): Marvic\HTTP\Message\Response
```

#### Client::put()

```php
public function put(string $path, ...$options): Marvic\HTTP\Message\Response
```

#### Client::request()

```php
public function request(string $method, string $path, ...$options): Marvic\HTTP\Message\Response
```

#### Client::trace()

```php
public function trace(string $path, ...$options): Marvic\HTTP\Message\Response
```

HTTP Request
------------

### Instance Properties

#### Request::$app

```php
public readonly ?Marvic\Application $app
```

#### Request::$cookies

```php
public readonly Marvic\HTTP\Cookie\Collection $cookies
```

#### Request::$connection

```php
public readonly string $connection
```

#### Request::$fragment

```php
public readonly string $fragment
```

#### Request::$host

```php
public readonly string $host
```

#### Request::$hostname

```php
public readonly ?string $hostname
```

#### Request::$ip

```php
public readonly string $ip
```

#### Request::$ips

```php
public readonly array $ips
```

#### Request::$method

```php
public readonly string $method
```

#### Request::$password

```php
public readonly ?string $password
```

#### Request::$path

```php
public readonly string $path
```

#### Request::$port

```php
public readonly ?int $port
```

#### Request::$query

```php
public readonly ?string $query
```

#### Request::$route

```php
public ?Marvic\Routing\Route $route
```

#### Request::$secure

```php
public readonly bool $secure
```

#### Request::$url

```php
public readonly string $url
```

#### Request::$userAgent

```php
public readonly string $userAgent
```

#### Request::$username

```php
public readonly ?string $username
```

#### Request::$version

```php
public string $version
```

### Instance methods

#### Request::accepts()

```php
public function accepts(...$types): array
```

#### Request::acceptsCharsets()

```php
public function acceptsCharsets(...$charsets): array
```

#### Request::acceptsEncodings()

```php
public function acceptsEncodings(...$encodings): array
```

#### Request::acceptsLanguages()

```php
public function acceptsLanguages(...$types): array
```

#### Request::input()

```php
public function input(string $key, mixed $default = null): mixed
```

#### Request::query()

```php
public function query(string $key, mixed $default = null): string|int
```

#### Request::read()

```php
public function read(): string
```

HTTP Response
-------------

### Instance Properties

#### Response::$cookies

```php
public readonly Marvic\HTTP\Cookie\Collection $cookies
```

#### Response::$headers

```php
public readonly Marvic\HTTP\Header\Collection $headers
```

#### Response::$length

```php
public int $length
```

#### Response::$phrase

```php
public string $phrase = 'OK'
```

#### Response::$request

```php
public readonly Marvic\HTTP\Message\Request $request
```

#### Response::$status

```php
public int $status = 200
```

#### Response::$type

```php
public string $type
```

#### Response::$version

```php
public string $version
```

### Instance methods

#### Response::download()

```php
public function download(string $path, array $options = []): void
```

#### Response::read()

```php
public function read(): string
```

#### Response::readline()

```php
public function readline(): void
```

#### Response::redirect()

```php
public function redirect(string $path, int $status = 302): void
```

#### Response::render()

```php
public function render(string $view, array $data = []): void
```

#### Response::seek()

```php
public function seek(int $start, int $size = 1024): void
```

#### Response::send()

```php
public function send(mixed $body = null): void
```

#### Response::sendJson()

```php
public function sendJson(array $data = []): void
```

#### Response::sendFile()

```php
public function sendFile(string $path, array $options = []): void
```

#### Response::setStatus()

```php
public function setStatus(int $code): void
```

#### Response::setType()

```php
public function setType(string $type, ?string $charset = null): void
```

#### Response::stream()

```php
public function stream(string $path, array $options = []): void
```

#### Response::write()

```php
public function write(string $content, bool $append = true): void
```

#### Response::writeline()

```php
public function writeline(string $content, bool $append = true): void
```

HTTP Headers
------------

### Instance methods

#### Headers::all()

```php
public function all(): array
```

#### Headers::get()

```php
public function get(string $key, mixed $default): mixed
```

#### Headers::has()

```php
public function has(string $key): bool
```

#### Headers::is()

```php
public function is(string $key, mixed $value): bool
```

#### Headers::remove()

```php
public function remove(string $key): void
```

#### Headers::set()

```php
public function set(string $key, mixed $value): void
```

HTTP Cookies
------------

### Instance methods

#### Cookies::all()

```php
public function all(): array
```

#### Cookies::get()

```php
public function get(string $key, mixed $default): mixed
```

#### Cookies::has()

```php
public function has(string $key): bool
```

#### Cookies::is()

```php
public function is(string $key, mixed $value): bool
```

#### Cookies::remove()

```php
public function remove(string $key): void
```

#### Cookies::set()

```php
public function set(string $key, mixed $value): void
```

HTTP Session
------------

### Instance Properties

### Instance methods
